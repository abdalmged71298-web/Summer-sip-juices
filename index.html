<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, minimum-scale=1, user-scalable=yes" />
  <title>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª - Ù…Ù†ÙŠÙˆ ÙƒØ§Ù…Ù„ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¹ Ø£Ø¯ÙˆØ§Øª ØªÙƒØ¨ÙŠØ±</title>
  <meta name="description" content="Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ÙŠÙˆ ÙƒØµÙˆØ±Ø© Ø¨Ù…Ù„Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ Ù…Ø¹ Ø£Ø¯ÙˆØ§Øª ØªÙƒØ¨ÙŠØ±/ØªØµØºÙŠØ± ÙˆØªØ­Ø±ÙŠÙƒ Ø¹Ø¨Ø± Ø£Ø²Ø±Ø§Ø±ØŒ ÙˆØ³Ù„Ø© Ø·Ù„Ø¨Ø§Øª Ù…ØµØºØ±Ø©." />
  <style>
    :root{ --accent:#000; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family: "Noto Naskh Arabic", Tahoma, Arial, sans-serif;background:#fff;color:#000;min-height:100vh;display:flex;flex-direction:column}

    header{padding:8px 12px;background:transparent}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:36px;height:36px;border-radius:6px;background:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;color:#000;border:0}
    h1{margin:0;font-size:15px}

    /* ØªÙƒØ¨ÙŠØ± Ù‚Ø³Ù… Ø§Ù„Ù…Ù†ÙŠÙˆ: Ù†Ø¬Ø¹Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø© Ø£ÙƒØ¨Ø± */
    .menu-wrap{flex:1;display:block;background:#fff;margin:0;padding:0}
    .preview-body{width:100%;height:calc(100vh - 140px);display:flex;align-items:center;justify-content:center;overflow:hidden; -webkit-overflow-scrolling:touch; touch-action:none; position:relative}
    .preview-body img{max-width:none;width:auto;height:100%;object-fit:contain;display:block;will-change:transform;transform-origin:center center}
    .preview-body iframe{width:100%;height:100%;border:0}

    /* Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙƒØ¨ÙŠØ± / Ø§Ù„ØªØ­Ø±ÙŠÙƒ Ø«Ø§Ø¨ØªØ© Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© */
    .zoom-controls{position:absolute;right:10px;top:10px;display:flex;flex-direction:column;gap:8px;z-index:40}
    .zoom-controls button{background:rgba(0,0,0,0.7);color:#fff;border:0;padding:8px;border-radius:8px;cursor:pointer;font-size:14px}
    .pan-controls{position:absolute;left:10px;top:10px;display:flex;flex-direction:column;gap:8px;z-index:40}
    .pan-grid{display:grid;grid-template-columns:repeat(3,36px);gap:6px}
    .pan-grid button{background:rgba(0,0,0,0.6);color:#fff;border:0;padding:6px;border-radius:6px;cursor:pointer}

    /* Ø´Ø±ÙŠØ· Ø§Ù„Ø·Ù„Ø¨: Ø£ØµØºØ± ÙˆØ£ÙƒØ«Ø± Ø­Ø´ÙˆØ±ÙŠØ© */
    .order-bar{position:sticky;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #eee;padding:6px 8px;display:flex;flex-direction:column;gap:6px;max-height:260px;overflow:auto}
    .input-row{display:flex;gap:8px;align-items:center}
    .field{flex:1}
    input,select,button,textarea{font-family:inherit}
    .field input,.field select{width:100%;padding:6px;border:1px solid #eee;border-radius:8px;font-size:14px}
    textarea{width:100%;min-height:56px;padding:6px;border:1px solid #eee;border-radius:8px;font-size:13px}
    .small{font-size:12px;color:#444}

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¶Ø§ÙØ© Ù…Ø¶ØºÙˆØ·Ø© */
    .cart-list{display:flex;flex-direction:column;gap:6px;margin-top:4px}
    .cart-item{display:flex;align-items:center;gap:8px;border:1px solid #fafafa;padding:6px;border-radius:6px;background:#fff}
    .item-info{flex:1;font-size:13px}
    .item-controls{display:flex;gap:6px;align-items:center}
    .ctrl-btn{background:#fff;border:1px solid #eee;padding:4px 8px;border-radius:6px;cursor:pointer;font-size:13px}
    .x-btn{background:#ffecec;color:#900;border:1px solid #f4c; padding:4px 8px;border-radius:6px;font-size:13px}
    .qty-row{display:flex;align-items:center;gap:6px}

    .send-row{display:flex;gap:8px;justify-content:flex-end;margin-top:4px}
    .send-btn{background:#000;color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-size:15px}

    @media (max-width:420px){ .preview-body{height:calc(100vh - 220px)} }
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo">Ù…</div>
      <div>
        <h1>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª- Ø§Ø¶ØºØ· Ù…Ø±ØªÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙŠÙˆ Ù„Ù„ØªÙƒØ¨ÙŠØ±</h1>
      </div>
    </div>
  </header>

  <main class="menu-wrap">
    <div class="preview-body" id="previewBody">
      <div class="help">Ø¬Ø§Ø±ÙŠ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©...</div>
      <!-- Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªÙƒØ¨ÙŠØ± ÙˆØ§Ù„ØªØ­Ø±ÙŠÙƒ -->
      <div class="zoom-controls" id="zoomControls" style="display:none">
        <button id="zoomIn">+</button>
        <button id="zoomOut">âˆ’</button>
        <button id="resetZoom">âŸ²</button>
      </div>
      <div class="pan-controls" id="panControls" style="display:none">
        <div class="pan-grid">
          <button data-pan="-1,-1">â†–</button><button data-pan="0,-1">â†‘</button><button data-pan="1,-1">â†—</button>
          <button data-pan="-1,0">â†</button><button data-pan="0,0">â€¢</button><button data-pan="1,0">â†’</button>
          <button data-pan="-1,1">â†™</button><button data-pan="0,1">â†“</button><button data-pan="1,1">â†˜</button>
        </div>
      </div>
    </div>
  </main>

  <div class="order-bar" id="orderBar">
    <div class="input-row">
      <div class="field">
        <input id="itemName" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù (Ù…Ø«Ø§Ù„: Ø¹ØµÙŠØ± Ù…Ù†Ø¬Ø§Ø¡ )" />
      </div>
      <div style="width:120px">
        <select id="size">
          <option value="Ø¹Ø§Ø¯ÙŠ">Ø¹Ø§Ø¯ÙŠ</option>
          <option value="ÙˆØ³Ø·">ÙˆØ³Ø·</option>
          <option value="ÙƒØ¨ÙŠØ±">ÙƒØ¨ÙŠØ±</option>
          <option value="Ø¬Ø±ÙƒÙ„ ØµØºÙŠØ±">Ø¬Ø±ÙƒÙ„ ØµØºÙŠØ±</option>
          <option value="Ø¬Ø±ÙƒÙ„ ÙˆØ³Ø·">Ø¬Ø±ÙƒÙ„ ÙˆØ³Ø·</option>
          <option value="Ø¬Ø±ÙƒÙ„ ÙƒØ¨ÙŠØ±">Ø¬Ø±ÙƒÙ„ ÙƒØ¨ÙŠØ±</option>
        </select>
      </div>
      <div style="width:70px">
        <button id="addItemBtn" class="ctrl-btn">ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</button>
      </div>
    </div>

    <div>
      <textarea id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø© Ù„Ù„Ø·Ù„Ø¨ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ù…Ø«Ù„:Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¨Ø±ÙˆØ¯Ø© Ø§Ùˆ Ø§ÙŠ Ù…Ù„Ø§Ø­Ø¶Ø© Ø§Ø®Ø±Ù‰..."></textarea>
    </div>

    <div class="small">Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¶Ø§ÙØ©:</div>
    <div class="cart-list" id="cartList"></div>

    <div style="display:flex;gap:6px;align-items:center">
      <input id="custName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" style="flex:1" />
      <input id="eta" placeholder="ÙˆÙ‚Øª Ø§Ù„ÙˆØµÙˆÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" style="width:120px" />
    </div>

    <div class="send-row">
      <button id="sendWhatsBtn" class="send-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø¢Ø¨</button>
    </div>
  </div>

  <script>
    // ===== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª =====
    const WHATSAPP_NUMBER = '966554087336';
    const DRIVE_ID = '1e99U5h4BSKb2sOTi6DjvkL2eypm9piJv';
    const driveImageUrl = 'https://drive.google.com/uc?export=view&id=' + DRIVE_ID;
    const drivePreviewUrl = 'https://drive.google.com/file/d/' + DRIVE_ID + '/preview';

    const previewBody = document.getElementById('previewBody');
    const cartListEl = document.getElementById('cartList');
    const zoomControls = document.getElementById('zoomControls');
    const panControls = document.getElementById('panControls');

    // Ø³Ù„Ø© Ø§Ù„Ø¹Ù†Ø§ØµØ±
    let cart = [];

    function renderCart(){
      cartListEl.innerHTML = '';
      cart.forEach((it, idx) => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div class="item-info">
            <div style="font-weight:700">${idx+1}. ${escapeHtml(it.name)}</div>
            <div class="small">Ø§Ù„Ø­Ø¬Ù…: ${escapeHtml(it.size)} â€¢ Ø§Ù„ÙƒÙ…ÙŠØ©: ${it.quantity}</div>
            ${it.notes? `<div class="small">Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${escapeHtml(it.notes)}</div>` : ''}
          </div>
          <div class="item-controls">
            <div class="qty-row">
              <button class="ctrl-btn" data-action="minus" data-idx="${idx}">-</button>
              <div class="small" style="min-width:26px;text-align:center">${it.quantity}</div>
              <button class="ctrl-btn" data-action="plus" data-idx="${idx}">+</button>
            </div>
            <button class="x-btn" data-action="remove" data-idx="${idx}">Ø­Ø°Ù</button>
          </div>
        `;
        cartListEl.appendChild(div);
      });

      // Ø±Ø¨Ø· Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
      cartListEl.querySelectorAll('button').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const action = btn.getAttribute('data-action');
          const idx = Number(btn.getAttribute('data-idx'));
          if(action === 'plus'){
            cart[idx].quantity = Number(cart[idx].quantity) + 1;
          } else if(action === 'minus'){
            if(cart[idx].quantity > 1) cart[idx].quantity = Number(cart[idx].quantity) - 1;
          } else if(action === 'remove'){
            cart.splice(idx,1);
          }
          renderCart();
        });
      });
    }

    // Ø¥Ø¶Ø§ÙØ© Ø¹Ù†ØµØ±
    document.getElementById('addItemBtn').addEventListener('click', ()=>{
      const name = document.getElementById('itemName').value.trim();
      const size = document.getElementById('size').value;
      const generalNotes = document.getElementById('notes').value.trim();
      if(!name){ alert('ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù.'); return; }

      cart.push({ name, quantity: 1, size, notes: '' });
      renderCart();

      document.getElementById('itemName').value = '';
      document.getElementById('itemName').focus();
    });

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù„Ù‰ ÙˆØ§ØªØ³Ø¢Ø¨
    document.getElementById('sendWhatsBtn').addEventListener('click', ()=>{
      if(cart.length === 0){ alert('Ù„Ù… ØªØ¶Ù Ø£ÙŠ Ø¹Ù†Ø§ØµØ± Ø¥Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨.'); return; }
      const name = document.getElementById('custName').value.trim();
      const eta = document.getElementById('eta').value.trim();
      const generalNotes = document.getElementById('notes').value.trim();

      const lines = [];
      lines.push('ğŸ“¦ *Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯*');
      if(name) lines.push('ğŸ‘¤ Ø§Ø³Ù… Ù…Ø³ØªÙ„Ù… Ø§Ù„Ø·Ù„Ø¨: ' + name);
      if(eta) lines.push('â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„ÙˆØµÙˆÙ„: ' + eta);
      lines.push('');
      lines.push('ğŸ§¾ *ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨*');
      cart.forEach((it, idx)=>{
        lines.push(`${idx+1}. ${it.name}`);
        lines.push(`   - Ø§Ù„ÙƒÙ…ÙŠØ©: ${it.quantity}    - Ø§Ù„Ø­Ø¬Ù…: ${it.size}`);
        if(it.notes) lines.push(`   - Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${it.notes}`);
      });
      if(generalNotes) { lines.push(''); lines.push('ğŸ”– Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©: ' + generalNotes); }
      lines.push('');
      lines.push('ğŸ“ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ´ÙƒØ±Ù‹Ø§ Ù„ÙƒÙ….');

      const message = lines.join('\n');
      const encoded = encodeURIComponent(message);
      const url = 'https://wa.me/' + WHATSAPP_NUMBER + '?text=' + encoded;
      window.open(url, '_blank');
    });

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Drive ÙˆØ¯Ø¹Ù… Ø§Ù„ØªÙƒØ¨ÙŠØ± Ø¹Ø¨Ø± Ø£Ø²Ø±Ø§Ø±
    function tryLoadAsImage(url){
      return new Promise((resolve,reject)=>{
        const img = new Image();
        img.onload = ()=> resolve(img);
        img.onerror = ()=> reject(new Error('not-an-image'));
        img.src = url;
      });
    }

    // Ù…ØªØºÙŠØ±Ø§Øª ØªØ­ÙƒÙ… Ø§Ù„ØªÙƒØ¨ÙŠØ±/Ø§Ù„ØªØ­Ø±ÙŠÙƒ
    let imgEl = null;
    let scale = 1.3; // Ù†Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù…ÙƒØ¨Ø±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
    let translate = {x:0,y:0};
    const ZOOM_STEP = 1.2; // Ù…Ø¶Ø§Ø¹Ù Ù„ÙƒÙ„ Ù†Ù‚Ø±Ø© +/
    const PAN_STEP = 40; // Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠÙƒØ³Ù„Ø§Øª Ù„ÙƒÙ„ Ù†Ù‚Ø±Ø© Ø³Ù‡Ù…

    function applyTransform(){ if(!imgEl) return; imgEl.style.transform = `translate(${translate.x}px, ${translate.y}px) scale(${scale})`; }

    function setupControls(){
      zoomControls.style.display = 'flex';
      panControls.style.display = 'block';

      document.getElementById('zoomIn').addEventListener('click', ()=>{ scale = Math.min(5, scale * ZOOM_STEP); applyTransform(); });
      document.getElementById('zoomOut').addEventListener('click', ()=>{ scale = Math.max(1, scale / ZOOM_STEP); translate = {x:0,y:0}; applyTransform(); });
      document.getElementById('resetZoom').addEventListener('click', ()=>{ scale = 1.3; translate = {x:0,y:0}; applyTransform(); });

      panControls.querySelectorAll('button').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const coords = btn.getAttribute('data-pan').split(',').map(Number);
          // coords are -1/0/1; multiply by PAN_STEP and adjust by scale
          translate.x += coords[0] * PAN_STEP;
          translate.y += coords[1] * PAN_STEP;
          applyTransform();
        });
      });

      // Ø¯Ø¹Ù… Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ù„Ù…Ø³ (Ø¹Ù†Ø¯ Ø§Ù„ØªÙƒØ¨ÙŠØ±) Ø¯Ø§Ø®Ù„ Ø§Ù„ØµÙˆØ±Ø©
      let isDragging = false; let start = {x:0,y:0};
      previewBody.addEventListener('touchstart', (e)=>{
        if(e.touches.length === 1 && scale > 1){ isDragging = true; start = { x: e.touches[0].clientX - translate.x, y: e.touches[0].clientY - translate.y }; }
      }, {passive:false});
      previewBody.addEventListener('touchmove', (e)=>{
        if(isDragging && e.touches.length===1){ e.preventDefault(); translate.x = e.touches[0].clientX - start.x; translate.y = e.touches[0].clientY - start.y; applyTransform(); }
      }, {passive:false});
      previewBody.addEventListener('touchend', ()=>{ isDragging = false; });
    }

    async function loadDriveFileWithButtons(){
      previewBody.innerHTML = '<div class="help">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>';
      try{
        const img = await tryLoadAsImage(driveImageUrl);
        previewBody.innerHTML = '';
        img.alt = 'Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ÙŠÙˆ';
        img.style.width = 'auto';
        img.style.height = '100%';
        img.style.objectFit = 'contain';
        img.style.touchAction = 'none';
        img.style.transform = `translate(${translate.x}px, ${translate.y}px) scale(${scale})`;
        previewBody.appendChild(img);
        imgEl = img;
        setupControls();
        return;
      }catch(e){
        // Ù„Ùˆ Ù„Ù… ØªÙƒÙ† ØµÙˆØ±Ø©ØŒ Ø¹Ø±Ø¶ iframe Ù…Ø¹Ø§ÙŠÙ†Ø© (Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ù…Ø®ÙÙŠØ©)
        previewBody.innerHTML = '';
        const iframe = document.createElement('iframe');
        iframe.src = drivePreviewUrl;
        iframe.title = 'Ù…Ø¹Ø§ÙŠÙ†Ø© Ù…Ù„Ù Drive';
        iframe.loading = 'lazy';
        previewBody.appendChild(iframe);
      }
    }

    loadDriveFileWithButtons();

    function escapeHtml(text){ return text.replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m]; }); }
  </script>
</body>
</html>
